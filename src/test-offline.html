<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>离线测试 - DIY装机助手</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .test-result {
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DIY装机助手 - 离线功能测试</h1>
        
        <div class="test-section">
            <h2>1. 基本功能测试</h2>
            <button onclick="testBasicFunctionality()">运行测试</button>
            <div id="basic-test-result" class="test-result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h2>2. 数据完整性测试</h2>
            <button onclick="testDataIntegrity()">运行测试</button>
            <div id="data-test-result" class="test-result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h2>3. 本地存储测试</h2>
            <button onclick="testLocalStorage()">运行测试</button>
            <div id="storage-test-result" class="test-result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h2>4. 图标渲染测试</h2>
            <button onclick="testIconRendering()">运行测试</button>
            <div id="icon-test-result" class="test-result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h3>测试完成后，请点击下方按钮打开主应用：</h3>
            <button onclick="openMainApp()" style="background-color: #28a745;">打开DIY装机助手</button>
        </div>
    </div>
    
    <script>
        function testBasicFunctionality() {
            const resultDiv = document.getElementById('basic-test-result');
            
            try {
                // 测试基本的JavaScript功能
                const testObj = { test: 'value' };
                const testArray = [1, 2, 3];
                const testString = 'Hello World';
                
                const test1 = typeof testObj === 'object';
                const test2 = Array.isArray(testArray);
                const test3 = typeof testString === 'string';
                
                if (test1 && test2 && test3) {
                    resultDiv.innerHTML = '<strong>✓ 成功</strong> - 基本JavaScript功能正常工作。';
                    resultDiv.className = 'test-result success';
                } else {
                    resultDiv.innerHTML = '<strong>✗ 失败</strong> - 基本JavaScript功能测试失败。';
                    resultDiv.className = 'test-result error';
                }
            } catch (error) {
                resultDiv.innerHTML = `<strong>✗ 失败</strong> - 测试过程中出现错误: ${error.message}`;
                resultDiv.className = 'test-result error';
            }
            
            resultDiv.style.display = 'block';
        }
        
        function testDataIntegrity() {
            const resultDiv = document.getElementById('data-test-result');
            
            try {
                // 测试JSON解析功能
                const testData = '{"name": "Test", "value": 123}';
                const parsed = JSON.parse(testData);
                
                if (parsed.name === 'Test' && parsed.value === 123) {
                    resultDiv.innerHTML = '<strong>✓ 成功</strong> - JSON解析功能正常。';
                    resultDiv.className = 'test-result success';
                } else {
                    resultDiv.innerHTML = '<strong>✗ 失败</strong> - JSON解析功能测试失败。';
                    resultDiv.className = 'test-result error';
                }
            } catch (error) {
                resultDiv.innerHTML = `<strong>✗ 失败</strong> - JSON解析测试失败: ${error.message}`;
                resultDiv.className = 'test-result error';
            }
            
            resultDiv.style.display = 'block';
        }
        
        function testLocalStorage() {
            const resultDiv = document.getElementById('storage-test-result');
            
            try {
                // 测试本地存储功能
                const testKey = 'test_key';
                const testValue = 'test_value';
                
                localStorage.setItem(testKey, testValue);
                const retrieved = localStorage.getItem(testKey);
                localStorage.removeItem(testKey);
                
                if (retrieved === testValue) {
                    resultDiv.innerHTML = '<strong>✓ 成功</strong> - 本地存储功能正常工作。';
                    resultDiv.className = 'test-result success';
                } else {
                    resultDiv.innerHTML = '<strong>✗ 失败</strong> - 本地存储功能测试失败。';
                    resultDiv.className = 'test-result error';
                }
            } catch (error) {
                resultDiv.innerHTML = `<strong>✗ 失败</strong> - 本地存储测试失败: ${error.message}`;
                resultDiv.className = 'test-result error';
            }
            
            resultDiv.style.display = 'block';
        }
        
        function testIconRendering() {
            const resultDiv = document.getElementById('icon-test-result');
            
            try {
                // 测试SVG渲染功能
                const svgTest = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svgTest.setAttribute('width', '24');
                svgTest.setAttribute('height', '24');
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', 'M12 5v14');
                path.setAttribute('stroke', 'currentColor');
                path.setAttribute('stroke-width', '2');
                
                svgTest.appendChild(path);
                document.body.appendChild(svgTest);
                
                const isRendered = svgTest instanceof SVGElement;
                
                document.body.removeChild(svgTest);
                
                if (isRendered) {
                    resultDiv.innerHTML = '<strong>✓ 成功</strong> - SVG图标渲染功能正常。';
                    resultDiv.className = 'test-result success';
                } else {
                    resultDiv.innerHTML = '<strong>✗ 失败</strong> - SVG图标渲染功能测试失败。';
                    resultDiv.className = 'test-result error';
                }
            } catch (error) {
                resultDiv.innerHTML = `<strong>✗ 失败</strong> - SVG渲染测试失败: ${error.message}`;
                resultDiv.className = 'test-result error';
            }
            
            resultDiv.style.display = 'block';
        }
        
        function openMainApp() {
            window.location.href = 'index.html';
        }
        
        // 页面加载时自动运行基本测试
        window.addEventListener('load', function() {
            console.log('测试页面加载完成');
            testBasicFunctionality();
        });
    </script>
</body>
</html>